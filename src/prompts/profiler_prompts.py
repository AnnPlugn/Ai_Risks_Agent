profiler_system_prompt = """Ты - продвинутый эксперт-аналитик по профилированию ИИ-агентов для оценки операционных рисков.

Твоя задача: создавать детальные профили ИИ-агентов на основе всестороннего анализа предоставленных данных.

ПРИНЦИПЫ АНАЛИЗА:
1. Контекстно-осознанный анализ с сохранением связей между компонентами
2. Максимальное извлечение информации из всех источников
3. Структурированное представление результатов
4. Выявление скрытых паттернов и зависимостей
5. Создание детального технического и бизнес-профиля

АРХИТЕКТУРНЫЙ ПОДХОД:
- Анализируй данные по контекстным группам
- Ищи связи между различными компонентами
- Создавай целостное представление агента
- Выявляй потенциальные риски и проблемы

ФОКУС НА КАЧЕСТВЕ:
- Анализируй не только явную, но и неявную информацию
- Выявляй противоречия и несоответствия
- Создавай связное представление всей архитектуры
- Оценивай полноту и качество документации

Отвечай структурированным JSON согласно контексту анализа."""


base_prompts_profiler = {
            "agent_overview": {
                "description": "Проанализируй общую информацию об ИИ-агенте.",
                "structure": {
                    "agent_name": "название агента",
                    "agent_type": "тип агента (chatbot/assistant/analyzer/etc)",
                    "primary_purpose": "основное назначение",
                    "target_audience": "целевая аудитория",
                    "key_capabilities": ["возможность1", "возможность2"],
                    "description": "подробное описание"
                }
            },
            "technical_architecture": {
                "description": "Проанализируй техническую архитектуру агента.",
                "structure": {
                    "llm_model": "используемая модель",
                    "programming_languages": ["язык1", "язык2"],
                    "frameworks": ["фреймворк1", "фреймворк2"],
                    "external_apis": ["api1", "api2"],
                    "data_access_patterns": ["тип доступа к данным"],
                    "autonomy_level": "supervised/semi_autonomous/autonomous",
                    "technical_complexity": "low/medium/high"
                }
            },
            "prompts_and_instructions": {
                "description": "Проанализируй промпты и инструкции агента.",
                "structure": {
                    "system_prompts": ["системный промпт 1", "системный промпт 2"],
                    "user_instructions": ["инструкция 1", "инструкция 2"],
                    "guardrails": ["ограничение 1", "ограничение 2"],
                    "personality_traits": ["черта 1", "черта 2"],
                    "response_style": "стиль ответов",
                    "ethical_guidelines": ["этическое правило 1", "этическое правило 2"],
                    "prompt_complexity": "простая/средняя/сложная",
                    "behavior_control_level": "низкий/средний/высокий"
                }
            },
            "business_logic": {
                "description": "Проанализируй бизнес-логику агента.",
                "structure": {
                    "business_processes": ["процесс 1", "процесс 2"],
                    "decision_making_logic": "логика принятия решений",
                    "data_processing": "как обрабатываются данные",
                    "workflow_patterns": ["паттерн 1", "паттерн 2"],
                    "integration_points": ["точка интеграции 1", "точка интеграции 2"],
                    "automation_level": "низкий/средний/высокий",
                    "business_complexity": "простая/средняя/сложная"
                }
            },
            "configurations": {
                "description": "Проанализируй конфигурации агента.",
                "structure": {
                    "configuration_parameters": {"параметр": "значение"},
                    "security_settings": ["настройка 1", "настройка 2"],
                    "performance_settings": {"параметр": "значение"},
                    "environment_variables": {"переменная": "описание"},
                    "deployment_config": "конфигурация развертывания"
                }
            },
            "supporting_docs": {
                "description": "Проанализируй поддерживающую документацию.",
                "structure": {
                    "documentation_quality": "high/medium/low",
                    "covered_topics": ["топик 1", "топик 2"],
                    "missing_documentation": ["что отсутствует"],
                    "examples_provided": 'true',
                    "user_guides": ["гайд 1", "гайд 2"],
                    "technical_specs": ["спецификация 1", "спецификация 2"]
                }
            }
        }

summary_report_prompt = """
# ОТЧЕТ ПО ПРОФИЛИРОВАНИЮ ИИ-АГЕНТА

**Assessment ID:** {assessment_id}
**Дата генерации:** {generation_date}
**Время обработки:** {total_time} секунд

## ОБЩАЯ ИНФОРМАЦИЯ

**Название агента:** {agent_name}
**Тип агента:** {agent_type}
**Версия:** {agent_version}
**Уровень автономности:** {autonomy_level}

**Описание:**
{description}

**Целевая аудитория:** {target_audience}

## ТЕХНИЧЕСКАЯ АРХИТЕКТУРА

**LLM Модель:** {llm_model}
**Типы данных:** {data_types}
**Внешние API:** {external_apis}

## БИЗНЕС-КОНТЕКСТ

**Операций в час:** {operations_per_hour}
**Доход с операции:** {revenue_per_operation}

##  БЕЗОПАСНОСТЬ И ОГРАНИЧЕНИЯ

### Системные промпты ({system_prompts_count}):
{system_prompts}

### Ограничения (Guardrails) ({guardrails_count}):
{guardrails}

{detailed_summary}

{llm_analysis}

{processing_stats}

## ОЦЕНКА КАЧЕСТВА ДАННЫХ

---
*Отчет сгенерирован автоматически системой профилирования ИИ-агентов*

"""

json_profiler_extr_prompt =  {
        "description": "Проанализируй предоставленные данные об ИИ-агенте и создай ДЕТАЛЬНЫЙ профиль, текст пиши на русском.",
        "requirements": {
            "critical_notes": [
                "Отвечай ТОЛЬКО валидным JSON без комментариев, без markdown блоков, без дополнительного текста",
                "JSON должен начинаться с { и заканчиваться }",
                "Все строковые значения в двойных кавычках",
                "Не используй trailing запятые"
            ],
            "analysis_requirements": [
                "Внимательно изучи КОД, КОНФИГУРАЦИИ, ДОКУМЕНТАЦИЮ",
                "Извлеки ВСЮ доступную информацию о поведении агента",
                "Определи РЕАЛЬНЫЙ тип агента из его функций",
                "Найди системные промпты, guardrails, ограничения",
                "Проанализируй уровень автономности и данные"
            ],
            "search_instructions": [
                "В коде ищи: system_prompt, prompt, instruction, guardrail, restriction, rule",
                "В конфигах ищи: настройки, ограничения, правила, API ключи",
                "В документации ищи: описания, архитектуру, назначение"
            ]
        },
        "json_structure": {
            "name": "реальное имя агента из кода/конфига или 'AI Agent'",
            "version": "версия из кода/конфига или '1.0'",
            "description": "ДЕТАЛЬНОЕ описание на основе анализа кода и документации (минимум 300 символов, опиши что агент РЕАЛЬНО делает)",
            "agent_type": "ТОЧНЫЙ тип: chatbot|assistant|trader|scorer|analyzer|generator|other",
            "llm_model": "НАЙДЕННАЯ модель в коде/конфиге (qwen, gpt, gemma, claude) или 'unknown'",
            "autonomy_level": "supervised|semi_autonomous|autonomous на основе анализа кода",
            "data_access": ["массив: public|internal|confidential|critical"],
            "external_apis": ["НАЙДЕННЫЕ внешние API, URL, интеграции из кода"],
            "target_audience": "КТО использует агента (найди в документации или выведи из функций)",
            "operations_per_hour": "число операций в час или null",
            "revenue_per_operation": "доход с операции или null",
            "system_prompts": ["ВСЕ найденные системные промпты, инструкции из кода/конфигов"],
            "guardrails": ["ВСЕ найденные ограничения, правила, запреты из кода/документации"],
            "source_files": ["типы найденных файлов: code, documents, configs, prompts"],
            "detailed_summary": {
                "overview": "ПОДРОБНЫЙ обзор агента, его назначения и ключевых особенностей (минимум 200 символов)",
                "technical_architecture": "ДЕТАЛЬНЫЙ анализ технической реализации, архитектуры, технологий (минимум 400 символов)",
                "operational_model": "ПОЛНОЕ описание операционной модели, процессов работы, взаимодействия (минимум 300 символов)"
            }
        },
        "field_instructions": {
            "agent_type": {
                "chatbot": "если есть обработка диалогов, чат-функции",
                "assistant": "если помогает пользователю, отвечает на вопросы",
                "trader": "если торгует, анализирует финансовые данные",
                "scorer": "если оценивает, ранжирует, скорит что-либо",
                "analyzer": "если анализирует данные, тексты, риски",
                "generator": "если генерирует контент, тексты, изображения",
                "other": "если не подходит ни один тип"
            },
            "autonomy_level": {
                "supervised": "требует постоянного контроля, подтверждения действий",
                "semi_autonomous": "частично самостоятельный, требует иногда вмешательства",
                "autonomous": "полностью самостоятельный, принимает решения сам"
            },
            "data_access": {
                "public": "открытые данные, интернет",
                "internal": "внутренние данные компании",
                "confidential": "конфиденциальные данные клиентов",
                "critical": "критически важные данные (финансы, персональные)"
            }
        },
        "search_examples": [
            "Ищи в коде строки типа: 'system_prompt = ...', 'instruction = ...', 'role = ...'",
            "В конфигах ищи: model, api_key, endpoints, restrictions",
            "В README ищи описание функций, назначение, аудитория"
        ],
        "critical_notes": [
            "НЕ придумывай данные, используй только найденную информацию",
            "Если что-то не найдено, используй логичные defaults",
            "description и detailed_summary должны быть содержательными, не общими фразами",
            "Обязательно заполни ВСЕ поля JSON структуры"
        ],

    }

