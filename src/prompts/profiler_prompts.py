profiler_system_prompt = """Ты - продвинутый эксперт-аналитик по профилированию ИИ-агентов для оценки операционных рисков.

Твоя задача: создавать детальные профили ИИ-агентов на основе всестороннего анализа предоставленных данных.

ПРИНЦИПЫ АНАЛИЗА:
1. Контекстно-осознанный анализ с сохранением связей между компонентами
2. Максимальное извлечение информации из всех источников
3. Структурированное представление результатов
4. Выявление скрытых паттернов и зависимостей
5. Создание детального технического и бизнес-профиля

АРХИТЕКТУРНЫЙ ПОДХОД:
- Анализируй данные по контекстным группам
- Ищи связи между различными компонентами
- Создавай целостное представление агента
- Выявляй потенциальные риски и проблемы

ФОКУС НА КАЧЕСТВЕ:
- Анализируй не только явную, но и неявную информацию
- Выявляй противоречия и несоответствия
- Создавай связное представление всей архитектуры
- Оценивай полноту и качество документации

Отвечай структурированным JSON согласно контексту анализа."""

json_profiler_extr_prompt = """
        Проанализируй предоставленные данные и создай детальный профиль ИИ-агента.

        ТРЕБОВАНИЯ К АНАЛИЗУ:
        1. Синтезируй информацию из всех контекстов
        2. Выяви связи между техническими и бизнес-аспектами
        3. Оцени полноту и качество документации
        4. Определи потенциальные риски и проблемы
        5. Создай детальное саммари с глубоким анализом

        ОБЯЗАТЕЛЬНЫЕ ПОЛЯ JSON:
        {
            "name": "название агента (если не найдено, используй 'AI Agent')",
            "version": "версия агента (по умолчанию 1.0)",
            "description": "полное детальное описание назначения и функций агента (минимум 200 слов)",
            "agent_type": "один из: chatbot, assistant, trader, scorer, analyzer, generator, other",
            "llm_model": "используемая LLM модель (если найдена, иначе 'unknown')",
            "autonomy_level": "один из: supervised, semi_autonomous, autonomous",
            "data_access": ["массив типов данных: public, internal, confidential, critical"],
            "external_apis": ["массив внешних API и интеграций"],
            "target_audience": "целевая аудитория агента",
            "operations_per_hour": число_или_null,
            "revenue_per_operation": число_или_null,
            "system_prompts": ["массив найденных системных промптов"],
            "guardrails": ["массив найденных ограничений и правил"],
            "source_files": ["типы проанализированных файлов"],
            "detailed_summary": {
                "overview": "Подробный обзор агента, его назначения и ключевых особенностей (минимум 100 слов)",
                "technical_architecture": "Детальный анализ технической реализации, архитектуры, используемых технологий (минимум 250 слов)",
                "operational_model": "Описание операционной модели, процессов работы, взаимодействия с пользователями (минимум 200 слов)",
            }
        }

        ВАЖНО: 
        - detailed_summary должно содержать глубокий анализ, а не поверхностные описания
        - Используй найденную информацию для обоснования выводов
        - Отвечай только валидным JSON без дополнительного текста
        """

base_prompts_profiler = {
            'agent_overview': """
            Проанализируй общую информацию об ИИ-агенте. Извлеки:
            {
                "agent_name": "название агента",
                "agent_type": "тип агента (chatbot/assistant/analyzer/etc)",
                "primary_purpose": "основное назначение",
                "target_audience": "целевая аудитория",
                "key_capabilities": ["возможность1", "возможность2"],
                "description": "подробное описание"
            }
            """,
            'technical_architecture': """
            Проанализируй техническую архитектуру агента. Извлеки:
            {
                "llm_model": "используемая модель",
                "programming_languages": ["язык1", "язык2"],
                "frameworks": ["фреймворк1", "фреймворк2"],
                "external_apis": ["api1", "api2"],
                "data_access_patterns": ["тип доступа к данным"],
                "autonomy_level": "supervised/semi_autonomous/autonomous",
                "technical_complexity": "low/medium/high"
            }
            """,
            'prompts_and_instructions': """
            Проанализируй промпты и инструкции агента. Извлеки:
            {
                "system_prompts": ["системный промпт 1", "системный промпт 2"],
                "user_instructions": ["инструкция 1", "инструкция 2"],
                "guardrails": ["ограничение 1", "ограничение 2"],
                "personality_traits": ["черта 1", "черта 2"],
                "response_style": "стиль ответов",
                "ethical_guidelines": ["этическое правило 1", "этическое правило 2"]
            }
            """,
            'business_logic': """
            Проанализируй бизнес-логику агента. Извлеки:
            {
                "business_processes": ["процесс 1", "процесс 2"],
                "decision_making_logic": "логика принятия решений",
                "data_processing": "как обрабатываются данные",
                "workflow_patterns": ["паттерн 1", "паттерн 2"],
                "integration_points": ["точка интеграции 1", "точка интеграции 2"]
            }
            """,
            'configurations': """
            Проанализируй конфигурации агента. Извлеки:
            {
                "configuration_parameters": {"параметр": "значение"},
                "security_settings": ["настройка 1", "настройка 2"],
                "performance_settings": {"параметр": "значение"},
                "environment_variables": {"переменная": "описание"},
                "deployment_config": "конфигурация развертывания"
            }
            """,
            'supporting_docs': """
            Проанализируй поддерживающую документацию. Извлеки:
            {
                "documentation_quality": "high/medium/low",
                "covered_topics": ["топик 1", "топик 2"],
                "missing_documentation": ["что отсутствует"],
                "examples_provided": true/false,
                "user_guides": ["гайд 1", "гайд 2"],
                "technical_specs": ["спецификация 1", "спецификация 2"]
            }
            """
        }

summary_report_prompt = """# ОТЧЕТ ПО ПРОФИЛИРОВАНИЮ ИИ-АГЕНТА

**Assessment ID:** {assessment_id}
**Дата генерации:** {generation_date}
**Время обработки:** {total_time} секунд

## ОБЩАЯ ИНФОРМАЦИЯ

**Название агента:** {agent_name}
**Тип агента:** {agent_type}
**Версия:** {agent_version}
**Уровень автономности:** {autonomy_level}

**Описание:**
{description}

**Целевая аудитория:** {target_audience}

## ТЕХНИЧЕСКАЯ АРХИТЕКТУРА

**LLM Модель:** {llm_model}
**Типы данных:** {data_types}
**Внешние API:** {external_apis}

## БИЗНЕС-КОНТЕКСТ

**Операций в час:** {operations_per_hour}
**Доход с операции:** {revenue_per_operation}

##  БЕЗОПАСНОСТЬ И ОГРАНИЧЕНИЯ

### Системные промпты ({system_prompts_count}):
{system_prompts}

### Ограничения (Guardrails) ({guardrails_count}):
{guardrails}

{detailed_summary}

{llm_analysis}

{processing_stats}

## ОЦЕНКА КАЧЕСТВА ДАННЫХ

**Балл качества:** {data_quality_score}/100

---
*Отчет сгенерирован автоматически системой профилирования ИИ-агентов*
"""