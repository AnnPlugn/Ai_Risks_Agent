=== –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø ===

–§–∞–π–ª: main.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π main.py —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Intelligent Orchestrator
–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å—é –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å + –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
"""
import asyncio
import logging
import argparse
import threading
import os
import sys
from datetime import datetime, timedelta
from dotenv import load_dotenv

# –î–æ–±–∞–≤–ª—è–µ–º –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ path
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

from config.logging_config import setup_logging
from config.settings_cop2 import (
    DATABASE_URL, 
    TELEGRAM_API_ID, 
    TELEGRAM_API_HASH, 
    TELEGRAM_CHANNELS,
    TELEGRAM_BOT_TOKEN
)
from database.db_manager import DatabaseManager
from utils.telegram_session_manager import TelegramSessionManager
from telegram_bot.bot import TelegramBot
from scheduler.jobs import JobScheduler
from telethon import TelegramClient

# –ò–º–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ workflow
from llm.qwen_model import QwenLLM
from llm.gemma_model import GemmaLLM
from agents.orchestrator i...

[COMMENTS]
# –î–æ–±–∞–≤–ª—è–µ–º –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ path
# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
# –ò–º–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ workflow
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
"""–í–∫–ª—é—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ reasoning –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤"""
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤
# –°–æ–∑–¥–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä –¥–ª—è reasoning –ª–æ–≥–æ–≤
# –ü–æ–ª—É—á–∞–µ–º –ª–æ–≥–≥–µ—Ä—ã –∞–≥–µ–Ω—Ç–æ–≤
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ handlers (—á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å)
# –û—Ç–∫–ª—é—á–∞–µ–º propagation —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–æ–≤
"""–ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ"""
"""–°–±–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∫–∞–Ω–∞–ª–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î"""
# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞—Ç –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
# –ü–æ–ª—É—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
# –§–∏–ª—å—Ç—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –¥–∞—Ç–µ
# –î–æ—Å—Ç–∏–≥–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Å—Ç–∞—Ä—à–µ –Ω—É–∂–Ω–æ–π –¥–∞—Ç—ã, –ø—Ä–µ–∫—Ä–∞—â–∞–µ–º —Å–±–æ—Ä
# –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–Ω—å—à–µ –ª–∏–º–∏—Ç–∞, –∑–Ω–∞—á–∏—Ç –¥–æ—Å—Ç–∏–≥–ª–∏ –∫–æ–Ω—Ü–∞
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏ –º—ã —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
# –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ë–î
"""–ó–∞–ø—É—Å–∫ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤"""
"""–ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π"""
"""–ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏–∫–æ–º"""
"""–°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–π–¥–∂–µ—Å—Ç–∞"""
"""–ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ (legacy –≤–µ—Ä—Å–∏—è)"""...

[FUNCTIONS]

def enable_detailed_reasoning_logs():

def run_scheduler(scheduler):

def _log_execution_results(result: dict):

def run_bot_with_scheduler():

def parse_arguments():

def main():

–§–∞–π–ª: agent_registry.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Intelligent Orchestrator
"""
import logging
from typing import Dict, Any, Optional
from enum import Enum

logger = logging.getLogger(__name__)

class AgentType(Enum):
    """–¢–∏–ø—ã –∞–≥–µ–Ω—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ"""
    DATA_COLLECTOR = "data_collector"
    ANALYZER = "analyzer" 
    CRITIC = "critic"
    DIGESTER = "digester"

class AgentRegistry:
    """
    –†–µ–µ—Å—Ç—Ä –∞–≥–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π intelligent –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    """
    
    def __init__(self, db_manager):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–µ—Å—Ç—Ä–∞ –∞–≥–µ–Ω—Ç–æ–≤
        
        Args:
            db_manager: –ú–µ–Ω–µ–¥–∂–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        """
        self.db_manager = db_manager
        self.agents = {}
        self._initialize_agents()
        
        logger.info(f"–†–µ–µ—Å—Ç—Ä –∞–≥–µ–Ω—Ç–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å {len(self.agents)} –∞–≥–µ–Ω—Ç–∞–º–∏")
    
    def _initialize_agents(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤"""
        try:
            # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∞–≥–µ–Ω—Ç–æ–≤
            from agents.data_collector import DataCo...

[COMMENTS]
"""–¢–∏–ø—ã –∞–≥–µ–Ω—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ"""
"""–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤"""
# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∞–≥–µ–Ω—Ç–æ–≤
# –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∞–≥–µ–Ω—Ç–æ–≤
# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –∫–∞–∫ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è, —Ç–∞–∫ –∏ enum
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–∑–æ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∞–≥–µ–Ω—Ç–∞
# –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
# –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
# –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∞–≥–µ–Ω—Ç–∞
# –ü—Ä–æ–≤–µ—Ä—è–µ–º Telegram —Å–µ—Å—Å–∏—é –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ
# –ü—Ä–æ–≤–µ—Ä—è–µ–º LLM –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
# –ü—Ä–æ–≤–µ—Ä—è–µ–º learning manager
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —à–∞–±–ª–æ–Ω—ã –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å

[FUNCTIONS]
    
    def __init__(self, db_manager):
    
    def _initialize_agents(self):
    
    def get_agent(self, agent_name: str):

[CLASSES]

class AgentType(Enum):

class AgentRegistry:

–§–∞–π–ª: analyzer.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–ê–≥–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
"""
import logging
import json
import os
from langchain.tools import Tool
from crewai import Agent, Task
from concurrent.futures import ThreadPoolExecutor, as_completed
from config.settings_cop2 import CATEGORIES
import datetime
from datetime import datetime as dt
import time
from utils.learning_manager import LearningExamplesManager
logger = logging.getLogger(__name__)


class AnalyzerAgent:
    def __init__(self, db_manager, llm_model=None):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞"""
        self.db_manager = db_manager
        
        # –ò–º–ø–æ—Ä—Ç –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
        from llm.qwen_model import QwenLLM
        self.llm_model = llm_model or QwenLLM()
        
        # –§–ª–∞–≥ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—Ä–∏—Ç–∏–∫–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
        self.fast_check = False
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä –æ–±—É—á–∞—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
        self.learning_manager = LearningExamplesManager()
        
        # –°–æ–∑–¥–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º...

[COMMENTS]
"""–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞"""
# –ò–º–ø–æ—Ä—Ç –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
# –§–ª–∞–≥ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—Ä–∏—Ç–∏–∫–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä –æ–±—É—á–∞—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
# –°–æ–∑–¥–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
# –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞ CrewAI
# –í agents/analyzer.py - —É–ª—É—á—à–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ _classify_message
# –ó–∞–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ –Ω–∞ —ç—Ç–æ—Ç
# –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∏–º–µ—Ä—ã —á–µ—Ä–µ–∑ LearningExamplesManager
# –£–õ–£–ß–®–ï–ù–ù–´–ô –ü–†–û–ú–ü–¢ —Å –±–æ–ª–µ–µ —á–µ—Ç–∫–∏–º —Ñ–æ—Ä–º–∞—Ç–æ–º
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ classify —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º
# –£–õ–£–ß–®–ï–ù–ù–´–ô –ü–ê–†–°–ò–ù–ì –æ—Ç–≤–µ—Ç–∞
# –†–∞–∑–±–∏–≤–∞–µ–º –æ—Ç–≤–µ—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –∏ –∏—â–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω—ã
# –ò—â–µ–º —Å—Ç—Ä–æ–∫—É —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π
# –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ—Å–ª–µ –¥–≤–æ–µ—Ç–æ—á–∏—è
# –¢–æ—á–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
# –ò—â–µ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
# –ò–∑–≤–ª–µ–∫–∞–µ–º —á–∏—Å–ª–æ
# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ —Ç–µ–∫—Å—Ç–µ –æ—Ç–≤–µ—Ç–∞
# –õ–æ–≥–∏—Ä—É–µ–º enhanced —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
# Fallback: –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å enhanced –æ—Ç–≤–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ–π –∞–Ω–∞–ª–∏–∑
# –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –æ—Ç–≤–µ—Ç–µ (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞)
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–∞–∑–æ–≤—É—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
# –ü–æ–≤—ã—à–∞–µ–º —É–≤...

[FUNCTIONS]
    def __init__(self, db_manager, llm_model=None):

    def _classify_message(self, message_text):
    def _format_examples_for_reasoning(self, examples):

    def _log_classification_reasoning(self, message_text, category, confidence, response):
        
    def analyze_messages(self, limit=1500, batch_size=20):
            def process_batch(batch_idx, batch):
    def create_task(self):

[CLASSES]


class AnalyzerAgent:

–§–∞–π–ª: collaborative_crew.py
–¢–∏–ø: text_py

[FULL_CODE]
# agents/collaborative_crew.py
"""
–°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ CrewAI
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï self.agent –∏–∑ analyzer.py, critic.py, digester.py
"""

import logging
from datetime import datetime
from typing import Dict, List, Any
from enum import Enum

from crewai import Task, Crew, Process

logger = logging.getLogger(__name__)

class CollaborativeCrew:
    """
    –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ CrewAI
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ self.agent –∏–∑ –∞–≥–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã
    """
    
    def __init__(self, agent_registry):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏
        
        Args:
            agent_registry: –†–µ–µ—Å—Ç—Ä –∞–≥–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã
        """
        self.agent_registry = agent_registry
        self.collaboration_history = []
        
        # –ü–æ–ª—É—á–∞–µ–º –°–£–©–ï–°–¢–í–£–Æ–©–ò–• CrewAI –∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ –Ω–∞—à–∏—Ö –∫–ª–∞—Å—Å–æ–≤
        self._get_existing_crewai_agents()
        
        logger.info("ü§ù CrewAI –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è —Å –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú–ò –∞–≥–µ–Ω—Ç–∞–º–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞")
    
    def _get_existing_crewai_a...

[COMMENTS]
# agents/collaborative_crew.py
# –ü–æ–ª—É—á–∞–µ–º –°–£–©–ï–°–¢–í–£–Æ–©–ò–• CrewAI –∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ –Ω–∞—à–∏—Ö –∫–ª–∞—Å—Å–æ–≤
"""–ü–æ–ª—É—á–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ CrewAI –∞–≥–µ–Ω—Ç—ã –∏–∑ –Ω–∞—à–∏—Ö –∫–ª–∞—Å—Å–æ–≤"""
# –ü–æ–ª—É—á–∞–µ–º –Ω–∞—à–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ò–• self.agent (CrewAI –∞–≥–µ–Ω—Ç—ã)
# –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º GemmaLLM –¥–ª—è –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏
# –ü–æ—Å–∫–æ–ª—å–∫—É —Ç–æ–ª—å–∫–æ —É –Ω–µ—ë –µ—Å—Ç—å –º–µ—Ç–æ–¥ generate
# –ó–ê–î–ê–ß–ê 1: –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º
# –ó–ê–î–ê–ß–ê 2: –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú –∫—Ä–∏—Ç–∏–∫–æ–º
# –°–û–ó–î–ê–ï–ú CREW –° –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú–ò –ê–ì–ï–ù–¢–ê–ú–ò
# –í–´–ü–û–õ–ù–Ø–ï–ú —á–µ—Ä–µ–∑ CrewAI, –Ω–æ —Å –Ω–∞—à–µ–π LLM
# –ü–∞—Ä—Å–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
# –ó–ê–î–ê–ß–ê 1: –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú –¥–∞–π–¥–∂–µ—Å—Ç–µ—Ä–æ–º
# –ó–ê–î–ê–ß–ê 2: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú –∫—Ä–∏—Ç–∏–∫–æ–º
# –°–û–ó–î–ê–ï–ú CREW –° –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú–ò –ê–ì–ï–ù–¢–ê–ú–ò
# –í–´–ü–û–õ–ù–Ø–ï–ú —á–µ—Ä–µ–∑ CrewAI
# –ü–∞—Ä—Å–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
# –°–æ–∑–¥–∞–µ–º –∑–∞–¥–∞—á–∏ –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
# –°–û–ó–î–ê–ï–ú CREW –°–û –í–°–ï–ú–ò –ê–ì–ï–ù–¢–ê–ú–ò
# –í–´–ü–û–õ–ù–Ø–ï–ú
# –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å LLM
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —É LLM –µ—Å—Ç—å –º–µ—Ç–æ–¥ generate
# –ü–æ—Å–∫–æ–ª—å–∫—É CrewAI –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∞—à–µ–π LLM –Ω–∞–ø—Ä—è–º—É—é,
# –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–¥–∞—á–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ –Ω–∞—à—É L...

[FUNCTIONS]
    
    def __init__(self, agent_registry):
    
    def _get_existing_crewai_agents(self):
    
    def _log_crewai_collaboration(self, scenario: str, result: Dict[str, Any]):

[CLASSES]

class CollaborativeCrew:

–§–∞–π–ª: context_manager.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã –∏ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏
"""
import logging
import json
from datetime import datetime, timedelta
from typing import Dict, Any, Optional, List
from dataclasses import dataclass, asdict
from enum import Enum

logger = logging.getLogger(__name__)

class ContextScope(Enum):
    """–û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞"""
    GLOBAL = "global"           # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
    SESSION = "session"         # –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–µ—Å—Å–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    TASK = "task"              # –ö–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –∑–∞–¥–∞—á–∏
    AGENT = "agent"            # –ö–æ–Ω—Ç–µ–∫—Å—Ç –∞–≥–µ–Ω—Ç–∞

@dataclass
class ContextEntry:
    """–ó–∞–ø–∏—Å—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ"""
    key: str
    value: Any
    scope: ContextScope
    created_at: datetime
    expires_at: Optional[datetime] = None
    metadata: Dict[str, Any] = None
    
    def __post_init__(self):
        if self.metadata is None:
            self.metadata = {}

class ContextManager:
    """
    –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –æ–±–º–µ–Ω–∞ ...

[COMMENTS]
"""–û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞"""
"""–ó–∞–ø–∏—Å—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ"""
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
"""–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞"""
# –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
# –ö—ç—à –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
"""–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏"""
# –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–∏
"""–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ"""
"""–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å–µ—Å—Å–∏–∏"""
"""–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∑–∞–¥–∞—á–∏"""
"""–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∞–≥–µ–Ω—Ç–∞"""
"""–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞"""
"""–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–µ—Å—Å–∏–∏"""
"""–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∑–∞–¥–∞—á–∏"""
"""–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∞–≥–µ–Ω—Ç–∞"""
"""–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–µ—Ç–æ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏—è"""
"""–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è"""
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
"""–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º"""
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à (–æ–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑ –≤ 5 –º–∏–Ω—É—Ç)
# –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –¥–∞–π–¥–∂–µ—Å—Ç–µ
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
# –ö—ç—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
"""–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∞–≥–µ–Ω—Ç–∞"""
"""–ü–æ–ª—É—á–µ–Ω–∏–µ...

[FUNCTIONS]
    
    def __post_init__(self):
    
    def __init__(self, db_manager):
    
    def _initialize_global_context(self):
    
    def end_session(self):
    
    def set_global(self, key: str, value: Any, expires_in_hours: int = None):
    
    def set_session(self, key: str, value: Any, expires_in_hours: int = None):
    
    def set_task(self, task_id: str, key: str, value: Any, expires_in_minutes: int = 60):
    
    def set_agent(self, agent_type: str, key: str, value: Any, expires_in_hours: int = 24):
    
    def _set_context(self, key: str, value: Any, scope: ContextScope, expires_at: datetime = None):
    
    def update_agent_status(self, agent_type: str, status: str, metadata: Dict[str, Any] = None):
    
    def record_task_metrics(self, task_id: str, metrics: Dict[str, Any]):
    
    def _update_aggregated_metrics(self, metrics: Dict[str, Any]):
    
    def _cleanup_session_context(self):
    
    def cleanup_expired(self):

[CLASSES]

class ContextScope(Enum):
class ContextEntry:

class ContextManager:

–§–∞–π–ª: critic.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–ê–≥–µ–Ω—Ç-–∫—Ä–∏—Ç–∏–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
"""
import logging
import json
import os
from datetime import datetime
from crewai import Agent
from langchain.tools import Tool
from utils.learning_manager import LearningExamplesManager
from config.settings_cop2 import CATEGORIES
from concurrent.futures import ThreadPoolExecutor
import concurrent.futures

logger = logging.getLogger(__name__)

class CriticAgent:
    def __init__(self, db_manager, llm_model=None):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞
        
        Args:
            db_manager (DatabaseManager): –ú–µ–Ω–µ–¥–∂–µ—Ä –ë–î
            llm_model (GemmaLLM, optional): –ú–æ–¥–µ–ª—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞
        """
        self.db_manager = db_manager
        
        # –ò–º–ø–æ—Ä—Ç –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
        from llm.gemma_model import GemmaLLM # Changed to lazy import
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä –æ–±—É—á–∞—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
        self.learning_manager = LearningExamplesManager()
        
       ...

[COMMENTS]
# –ò–º–ø–æ—Ä—Ç –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä –æ–±—É—á–∞—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
# –°–æ–∑–¥–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
# –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞ CrewAI
"""–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞"""
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä –æ–±—É—á–∞—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
# –í agents/critic.py - —É–ª—É—á—à–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ review_categorization
# –ó–∞–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ –Ω–∞ —ç—Ç–æ—Ç
# –í agents/critic.py - —É–ª—É—á—à–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ review_categorization
# –ó–∞–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ –Ω–∞ —ç—Ç–æ—Ç
# –ü–æ–ª—É—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
# –≠–¢–ê–ü 1: –ü–†–ê–í–û–í–ê–Ø –≠–ö–°–ü–ï–†–¢–ò–ó–ê
# –≠–¢–ê–ü 2: –õ–û–ì–ò–ß–ï–°–ö–ê–Ø –ö–û–ù–°–ò–°–¢–ï–ù–¢–ù–û–°–¢–¨
# –≠–¢–ê–ü 3: –ö–û–ù–¢–ï–ö–°–¢–ù–´–ô –ê–ù–ê–õ–ò–ó
# –≠–¢–ê–ü 4: –°–ò–ù–¢–ï–ó –ò –§–ò–ù–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï
# –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –ú–ù–û–ì–û–ü–ï–†–°–ü–ï–ö–¢–ò–í–ù–û–ì–û REASONING
# –ü—Ä–∏–º–µ–Ω—è–µ–º —Ä–µ—à–µ–Ω–∏–µ
"""–≠–¢–ê–ü 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–æ–≤–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏"""
"""–≠–¢–ê–ü 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏"""
"""–≠–¢–ê–ü 3: –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑"""
"""–≠–¢–ê–ü 4: –°–∏–Ω—Ç–µ–∑ –≤—Å–µ—Ö –∞–Ω–∞–ª–∏–∑–æ–≤ –∏ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è"""
"""–ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä—Ç–∏–∑"""
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
# –ò—â–µ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
"""–ü–∞—Ä—Å–∏–Ω–≥ —Ñ–∏–Ω–∞–ª—å...

[FUNCTIONS]
    def __init__(self, db_manager, llm_model=None):
    def _save_learning_example(self, text, category, justification):
        
    def get_message_by_id(self, message_id):

    def review_categorization(self, message_id, original_category):

    def _perform_legal_accuracy_review(self, message_text, current_category):

    def _perform_consistency_review(self, message_text, current_category):

    def _perform_context_review(self, message_text, channel, current_category):

    def _synthesize_multi_perspective_decision(self, message_text, original_category, 
                                            legal_analysis, consistency_analysis, context_analysis):

    def _parse_review_response(self, response, review_type):

    def _parse_final_decision(self, response):

    def _apply_review_decision(self, message_id, message, original_category, decision):
    
    def review_recent_categorizations(self, confidence_threshold=3, limit=30, batch_size=5, max_workers=3, start_date=None, end...

[CLASSES]

class CriticAgent:

–§–∞–π–ª: data_collector.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Telegram-–∫–∞–Ω–∞–ª–æ–≤
—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥–ª—É–±–æ–∫–æ–≥–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞
"""
import logging
import asyncio
from datetime import datetime, timedelta
import random
import time
from telethon import TelegramClient
from telethon.tl.functions.messages import GetHistoryRequest
from telethon.errors import FloodWaitError, SlowModeWaitError
from langchain.tools import Tool
from crewai import Agent, Task

from config.settings_cop2 import TELEGRAM_API_ID, TELEGRAM_API_HASH, TELEGRAM_CHANNELS
from utils.telegram_session_manager import TelegramSessionManager

logger = logging.getLogger(__name__) # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç datetime

class DataCollectorAgent:
    """–£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Telegram-–∫–∞–Ω–∞–ª–æ–≤"""
    
    def __init__(self, db_manager, api_id=None, api_hash=None):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞
        
        Args:
            db_manager (DatabaseManager): –ú–µ–Ω–µ–¥–∂–µ—Ä –ë–î
            api_id (str, optional): Telegram API ID
           ...

[COMMENTS]
"""–£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Telegram-–∫–∞–Ω–∞–ª–æ–≤"""
# –°–æ–∑–¥–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
# –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞ CrewAI
"""–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ Telegram —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å–µ—Å—Å–∏–π"""
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä —Å–µ—Å—Å–∏–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
"""–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"""
# –î–ª—è –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ä–∞–∑–±–∏–µ–Ω–∏—è –Ω–∞ –ø–æ–¥–ø–µ—Ä–∏–æ–¥—ã
# –î–ª—è –ø–µ—Ä–∏–æ–¥–æ–≤ —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å —Å–º–µ—â–µ–Ω–∏–µ–º –¥–∞—Ç
# –ù–∞—á–∏–Ω–∞–µ–º —Å –∫–æ–Ω—Ü–∞ –ø–µ—Ä–∏–æ–¥–∞ –∏ –¥–≤–∏–≥–∞–µ–º—Å—è –Ω–∞–∑–∞–¥
# –î–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
# –ò—Å–ø–æ–ª—å–∑—É–µ–º GetHistoryRequest –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º —Å–º–µ—â–µ–Ω–∏–µ–º
# –§–∏–ª—å—Ç—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –¥–∞—Ç–∞–º
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Ö–æ–¥–∏—Ç –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –Ω–∞—à –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç
# –ï—Å–ª–∏ –¥–∞—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–Ω—å—à–µ –Ω–∞—á–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã, –æ—Ç–º–µ—á–∞–µ–º —ç—Ç–æ
# –õ–æ–≥–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
# –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫ –æ–±—â–µ–º—É —Å–ø–∏—Å–∫—É
# –ï—Å–ª–∏ –º—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –Ω–∞—á–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã –∏–ª–∏ —Å–æ–±—Ä–∞–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π, –∑–∞–≤–µ—Ä—à–∞–µ–º —Å–±–æ—Ä
# –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ –º–µ–Ω—å—à–µ —Å–æ–æ–±—â–µ–Ω–∏–π, —á–µ–º –∑–∞–ø—Ä–æ—Å–∏–ª–∏, –∑–Ω–∞—á–∏—Ç –¥–æ—Å—Ç...

[FUNCTIONS]
    
    def __init__(self, db_manager, api_id=None, api_hash=None):
    
    def create_task(self):

[CLASSES]

class DataCollectorAgent:

–§–∞–π–ª: digester.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–ê–≥–µ–Ω—Ç –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–π–¥–∂–µ—Å—Ç–∞
"""
import logging
import re
import json
from datetime import datetime, time, timedelta
from crewai import Agent, Task
from concurrent.futures import ThreadPoolExecutor, as_completed
from config.settings_cop2 import CATEGORIES, BOT_USERNAME
from llm.gemma_model import GemmaLLM
from langchain.tools import Tool
logger = logging.getLogger(__name__)

class DigesterAgent:
    """–ê–≥–µ–Ω—Ç –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–π–¥–∂–µ—Å—Ç–∞"""
    
    def __init__(self, db_manager, llm_model=None):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞
        
        Args:
            db_manager (DatabaseManager): –ú–µ–Ω–µ–¥–∂–µ—Ä –ë–î
            llm_model (GemmaLLM, optional): –ú–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
        """
        self.db_manager = db_manager
        self.llm_model = llm_model or GemmaLLM()
        
        create_digest_tool = Tool(
            name="create_digest",
            func=self.create_digest,
            description="–§–æ—Ä–º–∏—Ä—É–µ—Ç –¥–∞–π–¥–∂–µ—Å—Ç –ø—Ä–∞–≤–æ–≤—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π"
        )

        # –°–æ–∑–¥–∞–µ...

[COMMENTS]
"""–ê–≥–µ–Ω—Ç –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–π–¥–∂–µ—Å—Ç–∞"""
# –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞ CrewAI
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –¥—É–º—ã
# –†–∞–∑–¥–µ–ª–∏–º –ø–æ —Å—Ç—Ä–æ–∫–∞–º –∏ –Ω–∞–π–¥–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
# –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
# –ë–µ—Ä–µ–º –ø–µ—Ä–≤—É—é —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É –∫–∞–∫ –∑–∞–≥–æ–ª–æ–≤–æ–∫
# –†–∞–∑–¥–µ–ª–∏–º —Ç–µ–∫—Å—Ç –Ω–∞ —á–∞—Å—Ç–∏ –¥–æ –∏ –ø–æ—Å–ª–µ URL
# –ò—â–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–µ—Ä–µ–¥ URL
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —à–∞–±–ª–æ–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
# –ò—â–µ–º –±–æ–ª–µ–µ —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ –ø–µ—Ä–≤—ã—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–æ–∫–∞—Ö
# –î–∞–ª–µ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞
# –ï—Å–ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π, –∏—â–µ–º –≤ —Ç–µ–∫—Å—Ç–µ –ø–æ—Å–ª–µ URL
# –û—á–∏—â–∞–µ–º –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –∑–∞–≥–æ–ª–æ–≤–∫–∞
# –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ URL –≤ —Ç–µ–∫—Å—Ç–µ
# –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã URL, —Å–æ—Ö—Ä–∞–Ω—è—è –ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ URL
# –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ —ç—Ç–æ–≥–æ URL
# –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ —á–∞—Å—Ç—å—é markdown —Å—Å—ã–ª–∫–∏
# –ù–∞—Ö–æ–¥–∏–º –æ—Ç–∫—Ä—ã–≤–∞—é—â—É—é —Å–∫–æ–±–∫—É –ø–µ—Ä–µ–¥ URL
# –≠—Ç–æ —á–∞—Å—Ç—å markdown —Å—Å—ã–ª–∫–∏, –Ω–µ —É–¥–∞–ª—è–µ–º
# –£–¥–∞–ª—è–µ–º URL
# –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –≤—Ö–æ–∂–¥–µ–Ω–∏–π
# –ó–∞–º–µ–Ω—è–µ–º –æ–±—ã—á–Ω—ã–µ URL –Ω–∞ markdown —Å—Å—ã–ª–∫–∏, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å...

[FUNCTIONS]
    
    def __init__(self, db_manager, llm_model=None):
    def _extract_title_for_url(self, text, url):
    def _add_category_icon(self, category):

    def _clean_text_with_links(self, text):
    def _extract_links_and_headlines(self, text):
    
    def _generate_brief_section(self, category, messages):

    def _generate_short_annotation(self, text, max_length=150):
    
    def _generate_detailed_section(self, category, messages):

    def _generate_digest_intro(self, date, total_messages, categories_count, is_brief=True, days_back=1):
    
    def _process_categories_parallel(self, categories_to_process, messages_by_category, digest_type):

    def create_digest(self, date=None, days_back=1, digest_type="both", 
                update_existing=True, focus_category=None,
                channels=None, keywords=None, digest_id=None):
    def get_digest_to_update(self, date, digest_type):
    def create_task(self):
    def update_digests_for_date(self, date):
    def save_digest_wi...

[CLASSES]

class DigesterAgent:

–§–∞–π–ª: orchestrator.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
Orchestrator Agents - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∏ intelligent –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ã

–°–æ–¥–µ—Ä–∂–∏—Ç:
Intelligent Orchestrator Agent - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CrewAI –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π
"""
import logging
import asyncio
from datetime import datetime, timedelta
from typing import Dict, List, Optional, Any
from enum import Enum
from dataclasses import dataclass
from crewai import Agent, Task, Crew

logger = logging.getLogger(__name__)

class TaskType(Enum):
    """–¢–∏–ø—ã –∑–∞–¥–∞—á –≤ —Å–∏—Å—Ç–µ–º–µ"""
    DATA_COLLECTION = "data_collection"
    MESSAGE_ANALYSIS = "message_analysis"
    CATEGORIZATION_REVIEW = "categorization_review"
    DIGEST_CREATION = "digest_creation"
    DIGEST_UPDATE = "digest_update"

class TaskPriority(Enum):
    """–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á"""
    LOW = 1
    NORMAL = 2
    HIGH = 3
    CRITICAL = 4

class TaskStatus(Enum):
    """–°—Ç–∞—Ç—É—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á"""
    PENDING = "pending"
    RUNNING = "running"
    COMPLETED = "completed"
    FAILED = "failed"
    CANCELLED = "cancelled"

@dataclass
class Tas...

[COMMENTS]
"""–¢–∏–ø—ã –∑–∞–¥–∞—á –≤ —Å–∏—Å—Ç–µ–º–µ"""
"""–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á"""
"""–°—Ç–∞—Ç—É—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á"""
"""–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏"""
"""–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏"""
"""–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞"""
# –°–æ–∑–¥–∞–µ–º CrewAI –∞–≥–µ–Ω—Ç–∞
# –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
"""–ì–ª–∞–≤–Ω—ã–π –º–µ—Ç–æ–¥ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"""
# –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
"""–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)"""
# –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞–π–¥–∂–µ—Å—Ç—ã –∑–∞ —Å–µ–≥–æ–¥–Ω—è
"""–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)"""
"""–°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è)"""
# –ë–∞–∑–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è daily_workflow
"""–°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è —Å—Ä–æ—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"""
"""–°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞"""
"""–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞–π–¥–∂–µ—Å—Ç–∞"""
"""–£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞"""
"""–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω–æ–µ)"""
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –≤ executor
"""–ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)"""
"""–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ CrewAI –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"""
"""–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞"""
# –ò–Ω–∏—Ü–∏...

[FUNCTIONS]
    
    def __post_init__(self):
    
    def __init__(self, db_manager, agent_registry=None):
    
    def __init__(self, db_manager, agent_registry=None):
            def llm_generate(prompt):

[CLASSES]

class TaskType(Enum):

class TaskPriority(Enum):

class TaskStatus(Enum):
class TaskRequest:
class TaskResult:
class OrchestratorAgent:

class IntelligentOrchestratorAgent:

–§–∞–π–ª: logging_config.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
"""
import os
import logging
from logging.handlers import RotatingFileHandler

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
logs_dir = os.path.join(os.path.dirname(os.path.dirname(__file__)), 'logs')
if not os.path.exists(logs_dir):
    os.makedirs(logs_dir)

# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–∞
log_file_path = os.path.join(logs_dir, 'lawdigest.log')

# –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞
def setup_logging():
    # –°–æ–∑–¥–∞–µ–º —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä
    formatter = logging.Formatter(
        '%(asctime)s - %(name)s - %(levelname)s - %(message)s',
        datefmt='%Y-%m-%d %H:%M:%S'
    )
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ñ–∞–π–ª–∞
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ñ–∞–π–ª–∞ —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–¥–∏—Ä–æ–≤–∫–∏ UTF-8
    file_handler = RotatingFileHandler(
    log_file_path,
    maxBytes=10*1024*1024,  # 10MB
    backupCount=5,
    encoding='utf-8'  # –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É
    )
    file_handler.setFormatter(formatter)
    file_handler.setLevel(logging.INFO)
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏
    console_handler = logging.StreamHandler()
    ...

[COMMENTS]
# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–∞
# –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞
# –°–æ–∑–¥–∞–µ–º —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ñ–∞–π–ª–∞
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ñ–∞–π–ª–∞ —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–¥–∏—Ä–æ–≤–∫–∏ UTF-8
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏
# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–æ—Ä–Ω–µ–≤–æ–π –ª–æ–≥–≥–µ—Ä
# –û—Ç–¥–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –ª–æ–≥–≥–µ—Ä–æ–≤ CrewAI

[FUNCTIONS]
def setup_logging():

–§–∞–π–ª: settings.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞
"""
import os
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env —Ñ–∞–π–ª–∞
load_dotenv()

# Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TELEGRAM_BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")
TELEGRAM_API_ID = os.getenv("TELEGRAM_API_ID")
TELEGRAM_API_HASH = os.getenv("TELEGRAM_API_HASH")
BOT_USERNAME = os.getenv("BOT_USERNAME", "your_bot_username")  # –ò–º—è –±–æ—Ç–∞ –¥–ª—è —Å—Å—ã–ª–æ–∫

# –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
TELEGRAM_CHANNELS = [
    # –í—ã—Å—à–∏–µ –æ—Ä–≥–∞–Ω—ã –≤–ª–∞—Å—Ç–∏
    "@kremlininfo",      # –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç –†–§
    "@governmentru",     # –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ –†–§
    "@dumainfo",         # –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–∞—è –î—É–º–∞
    "@sovfedinfo",       # –°–æ–≤–µ—Ç –§–µ–¥–µ—Ä–∞—Ü–∏–∏
    
    # –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞
    "@minzdravru",       # –ú–∏–Ω–∑–¥—Ä–∞–≤ –†–§
    "@rosmintrudru",     # –ú–∏–Ω—Ç—Ä—É–¥ –†–§
    "@minprosvetrf",     # –ú–∏–Ω–ø—Ä–æ—Å–≤–µ—â–µ–Ω–∏—è –†–§
    "@minpromtorgrf",    # –ú–∏–Ω–ø—Ä–æ–º—Ç–æ—Ä–≥ –†–§
    "@MinEconomyrf",     # –ú–∏–Ω—ç–∫–æ–Ω–æ–º—Ä–∞–∑–≤–∏—Ç–∏—è –†–§
    "@mincifry",         # –ú–∏–Ω—Ü–∏—Ñ—Ä—ã –†–§
    "@mintransrussia",   # –ú–∏–Ω—Ç—Ä–∞–Ω—Å –†–§
    "@minprirody",       # –ú–∏–Ω–ø—Ä...

[COMMENTS]
# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env —Ñ–∞–π–ª–∞
# Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
# –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
# –í—ã—Å—à–∏–µ –æ—Ä–≥–∞–Ω—ã –≤–ª–∞—Å—Ç–∏
# –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞
# –§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ —Å–ª—É–∂–±—ã –∏ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞
# –ü—Ä–æ—á–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ LLM
# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
# –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á

–§–∞–π–ª: base_llm.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö LLM –º–æ–¥–µ–ª–µ–π, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –æ–±—â—É—é –ª–æ–≥–∏–∫—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.
"""
import logging
import requests
import hashlib
import os
import time

logger = logging.getLogger(__name__)

class BaseLLM:
    """
    –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è LLM –º–æ–¥–µ–ª–µ–π, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
    –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API.
    """
    def __init__(self, model_name: str, api_url: str, cache_dir: str = 'llm_cache'):
        self.model_name = model_name
        self.api_url = f"{api_url}/v1/chat/completions"
        self.cache_dir = os.path.join(os.path.dirname(os.path.dirname(__file__)), cache_dir)
        os.makedirs(self.cache_dir, exist_ok=True)
 
    def _get_cached_response(self, prompt: str, max_tokens: int, temperature: float) -> tuple[str | None, bool]:
        """
        –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –∏–∑ –∫—ç—à–∞ —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞ –∏ TTL.
        """
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ö—ç—à–∞, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
        cache_key = hashlib.md5((prompt + f"_t...

[COMMENTS]
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ö—ç—à–∞, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º TTL –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞
# –î–ª—è –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–±–æ–ª—å—à–µ 5000 —Å–∏–º–≤–æ–ª–æ–≤) - –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
# Strategy: first retry with fewer tokens, then shorten prompt
# If all retries fail due to timeout, return a default error message

[FUNCTIONS]
    def __init__(self, model_name: str, api_url: str, cache_dir: str = 'llm_cache'):

[CLASSES]

class BaseLLM:

–§–∞–π–ª: gemma_model.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é Gemma 3 —á–µ—Ä–µ–∑ LLM Studio
"""
import logging
import requests
import hashlib
import os
import time
from .base_llm import BaseLLM # Added import for BaseLLM

logger = logging.getLogger(__name__)

class GemmaLLM(BaseLLM):
    """–ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é Gemma 3"""
    
    def __init__(self, model_name="gemma-3-12b-it", api_url="http://127.0.0.1:1234"):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏
        
        Args:
            model_name (str): –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
            api_url (str): –ë–∞–∑–æ–≤—ã–π URL –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
        """ 
        super().__init__(model_name, api_url) # Call the base class constructor

    def generate(self, prompt, max_tokens=1500, temperature=0.7):
        """
        –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–∞
        
        Args:
            prompt (str): –ó–∞–ø—Ä–æ—Å –∫ –º–æ–¥–µ–ª–∏
            max_tokens (int): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ
            temperature (float): –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (0.0-1.0)
            
        Returns:...

[COMMENTS]
"""–ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é Gemma 3"""
# Use the caching logic from the base class
# If no cache, generate response
# Save to cache

[FUNCTIONS]
    
    def __init__(self, model_name="gemma-3-12b-it", api_url="http://127.0.0.1:1234"):

    def generate(self, prompt, max_tokens=1500, temperature=0.7):
    
    def summarize(self, text, max_tokens=500):

[CLASSES]

class GemmaLLM(BaseLLM):

–§–∞–π–ª: qwen_model.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é Qwen2.5 —á–µ—Ä–µ–∑ LLM Studio
"""
import logging
from .base_llm import BaseLLM # Import the new base class
import os # Added import for os
import hashlib # Added import for hashlib

logger = logging.getLogger(__name__) 

class QwenLLM(BaseLLM):
    """–ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é Qwen2.5"""
    
    def __init__(self, model_name="qwen2.5-14b-instruct-1m", api_url="http://127.0.0.1:1234"):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏
        
        Args:
            model_name (str): –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
            api_url (str): –ë–∞–∑–æ–≤—ã–π URL –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
        """ 
        super().__init__(model_name, api_url) # Call the base class constructor
        
    def classify(self, text, categories):
        """
        –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
        
        Args:
            text (str): –¢–µ–∫—Å—Ç –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
            categories (list): –°–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            
        Returns:
            str: –ù–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
        "...

[COMMENTS]
"""–ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é Qwen2.5"""
# Use the caching logic from the base class, ensure prompt includes categories for caching key
# Process cached response as before
# If not found in cache, make the request
# Save to cache
# Process the response and save to cache.
"""Helper to process classification response text and return the best category."""

[FUNCTIONS]
    
    def __init__(self, model_name="qwen2.5-14b-instruct-1m", api_url="http://127.0.0.1:1234"):
        
    def classify(self, text, categories):

    def _process_classification_response(self, response_text, categories):

[CLASSES]

class QwenLLM(BaseLLM):

–§–∞–π–ª: bot.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ telegram_bot/bot.py –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥
"""

import logging
from telegram import BotCommand
import asyncio
from telegram.ext import (
    Application, 
    CommandHandler, 
    MessageHandler, 
    CallbackQueryHandler,
    filters
)
from config.settings_cop2 import TELEGRAM_BOT_TOKEN # Corrected from a circular import suggestion
from telegram_bot.handlers import (
    start_command, help_command,
    period_command, list_digests_command, category_selection_command, button_callback, # Removed category_command import
)
from telegram_bot.improved_view_digest import ( # Removed start_digest_generation from this import as it's defined in handlers.py
    show_full_digest, get_category_icon
)
from telegram_bot.improved_message_handler import improved_message_handler
from llm.gemma_model import GemmaLLM # Corrected LLM import


logger = logging.getLogger(__name__)

class TelegramBot:
    def __init__(self, db_manager, llm_model=None): 
        """–ò–Ω–∏—Ü...

[COMMENTS]
"""–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞"""
# –£–±–∏—Ä–∞–µ–º –∫–æ–º–∞–Ω–¥—ã digest –∏ detail, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã
# ("digest", "–ö—Ä–∞—Ç–∫–∏–π –¥–∞–π–¥–∂–µ—Å—Ç –Ω–æ–≤–æ—Å—Ç–µ–π"),
# ("detail", "–ü–æ–¥—Ä–æ–±–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç"),
"""–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥"""
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
# –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–µ—Ä–∏–æ–¥–∞
# –ö–æ–º–∞–Ω–¥—ã –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
# –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å–ø–∏—Å–∫–∞ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ª–±—ç–∫–æ–≤ –æ—Ç –∫–Ω–æ–ø–æ–∫ (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
# –†–∞–∑–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
# improved_message_handler now needs db_manager and llm_model which are passed via bot_data
"""–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"""
# –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
# –ü—Ä–∏–∫—Ä–µ–ø–ª—è–µ–º db_manager –∏ llm_model –∫ bot_data –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö
# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –º–µ–Ω—é –±–æ—Ç–∞
# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Telegram
# –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞

[FUNCTIONS]
    def __init__(self, db_manager, llm_model=None):
    
    def run(self):

[CLASSES]

class TelegramBot:

–§–∞–π–ª: improved_message_handler.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–£–ª—É—á—à–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –±–æ—Ç–∞
"""
import logging
from datetime import datetime, timedelta
from telegram import Update
from telegram.ext import ContextTypes
from llm.gemma_model import GemmaLLM # Used for LLM

logger = logging.getLogger(__name__)

async def improved_message_handler(update: Update, context: ContextTypes.DEFAULT_TYPE, db_manager, llm_model):
    """
    –£–ª—É—á—à–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
    
    Args:
        update (Update): –û–±—ä–µ–∫—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç Telegram
        context (ContextTypes.DEFAULT_TYPE): –ö–æ–Ω—Ç–µ–∫—Å—Ç Telegram
        db_manager: –ú–µ–Ω–µ–¥–∂–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        llm_model: –ú–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
    """
    # Retrieve db_manager and llm_model from bot_data if not passed directly
    if not db_manager:
        db_manager = context.bot_data.get("db_manager")
    if not llm_model:
        llm_model = context.bot_data.get("llm_model")
    
    user_message = update.message.text # Original positio...

[COMMENTS]
# Retrieve db_manager and llm_model from bot_data if not passed directly
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∂–¥–µ–º –ª–∏ –º—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–≤–æ–¥
# (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
# –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç
# ...
# –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
# ...
# –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ –¥–ª—è –∫–∞–Ω–∞–ª–∞
# ...
# –ï—Å–ª–∏ –Ω–µ—Ç –æ—Å–æ–±—ã—Ö –æ–∂–∏–¥–∞–Ω–∏–π, —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º –∫–∞–∫ –≤–æ–ø—Ä–æ—Å –∫ –±–æ—Ç—É
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞
# –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç–≤–µ—Ç–∞ - –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç
# –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç, –µ—Å–ª–∏ –µ—Å—Ç—å
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–≤–µ–∂–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
# –ü–æ–ª—É—á–∞–µ–º —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
# –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –Ω–µ–¥–∞–≤–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –æ–±—ä–µ–º)
# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
# –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å –∫ –º–æ–¥–µ–ª–∏
# –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–ª–∏ —Å —Ç–∞–π–º–∞—É—Ç–æ–º
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–∞
# –õ–æ–≥–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–µ 100 —Å–∏–º–≤–æ–ª–æ–≤ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω...

–§–∞–π–ª: improved_view_digest.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–π–¥–∂–µ—Å—Ç–∞ —Å —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∫–Ω–æ–ø–æ–∫
"""
import hashlib
import logging
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ContextTypes

logger = logging.getLogger(__name__)

def get_short_category_id(category):
    """
    –°–æ–∑–¥–∞–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    
    Args:
        category (str): –ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        
    Returns:
        str: –ö–æ—Ä–æ—Ç–∫–∏–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID (–¥–æ 8 —Å–∏–º–≤–æ–ª–æ–≤)
    """
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ö–µ—à –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ ID
    hash_object = hashlib.md5(category.encode())
    # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–µ 6 —Å–∏–º–≤–æ–ª–æ–≤ —Ö–µ—à–∞, —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –∫–æ—Ä–æ—Ç–∫–∏–º
    return hash_object.hexdigest()[:6]

async def view_digest_callback(update: Update, context: ContextTypes.DEFAULT_TYPE, db_manager):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ª–±—ç–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–π–¥–∂–µ—Å—Ç–∞ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫"""
    query = update.callback_query
    await query.answer()
    
    try:
        # –ò–∑–≤–ª–µ–∫–∞–µ–º ID –¥–∞–π–¥–∂–µ—Å—Ç...

[COMMENTS]
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ö–µ—à –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ ID
# –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–µ 6 —Å–∏–º–≤–æ–ª–æ–≤ —Ö–µ—à–∞, —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –∫–æ—Ä–æ—Ç–∫–∏–º
"""–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ª–±—ç–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–π–¥–∂–µ—Å—Ç–∞ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫"""
# –ò–∑–≤–ª–µ–∫–∞–µ–º ID –¥–∞–π–¥–∂–µ—Å—Ç–∞ –∏–∑ callback_data
# –ü–æ–ª—É—á–∞–µ–º –¥–∞–π–¥–∂–µ—Å—Ç —Å —Å–µ–∫—Ü–∏—è–º–∏ –ø–æ ID
# –§–æ—Ä–º–∏—Ä—É–µ–º —Å–≤–æ–¥–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–∞–π–¥–∂–µ—Å—Ç–∞
# –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
# –°–æ–∑–¥–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–π
# –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –æ–≥–ª–∞–≤–ª–µ–Ω–∏—è
# –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–æ–∫—É—Å–µ, –µ—Å–ª–∏ –µ—Å—Ç—å
# –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
# –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –∫–æ—Ä–æ—Ç–∫–∏–º–∏ ID
# –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∞–ø–ø–∏–Ω–≥ ID –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è —ç—Ç–æ–≥–æ –¥–∞–π–¥–∂–µ—Å—Ç–∞
# –î–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É —Å –∫–æ—Ä–æ—Ç–∫–∏–º ID
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ—Ä–æ—Ç–∫–∏–π ID –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
# –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∞–ø–ø–∏–Ω–≥ ID -> –∫–∞—Ç–µ–≥–æ—Ä–∏—è
# –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É —Å –∫–æ—Ä–æ—Ç–∫–∏–º callback_data
# –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–ª–Ω–æ–≥–æ –¥–∞–π–¥–∂–µ—Å—Ç–∞
# –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Å–ø–∏—Å–∫—É –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ –¥–∞–π–¥–∂–µ—Å—Ç–∞
# –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
"""–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ª–±—ç–∫–∞ –¥–ª—è –ø—Ä–æ...

[FUNCTIONS]

def get_short_category_id(category):

def get_category_icon(category):

–§–∞–π–ª: period_command.py
–¢–∏–ø: text_py

[FULL_CODE]
"""
–£–ª—É—á—à–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /period –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–π–¥–∂–µ—Å—Ç–∞ –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥,
–≤–∫–ª—é—á–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ "—Å–µ–≥–æ–¥–Ω—è" –∏ "–≤—á–µ—Ä–∞"
"""
import logging
import re
from datetime import time, datetime, timedelta
import asyncio
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ContextTypes

from agents.data_collector import DataCollectorAgent # Already imported
from agents.analyzer import AnalyzerAgent # Already imported
from agents.critic import CriticAgent # Already imported
from agents.digester import DigesterAgent # Already imported
from llm.qwen_model import QwenLLM # Added missing import
from llm.gemma_model import GemmaLLM # Added missing import
from utils.text_utils import TextUtils # Added missing import

logger = logging.getLogger(__name__)

# –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–∫—Å—Ç–æ–º
utils = TextUtils() # Instantiate TextUtils

async def period_command(update: Update, context: ContextTypes.DEFAULT_TYPE, db_manager):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ...

[COMMENTS]
# –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–∫—Å—Ç–æ–º
"""–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /period - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–π–¥–∂–µ—Å—Ç–∞ –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥"""
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∫–æ–º–∞–Ω–¥—ã
# –†–∞–∑–±–∏—Ä–∞–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∫–∞–∑–∞–Ω–∏–µ —Ç–∏–ø–∞ –¥–∞–π–¥–∂–µ—Å—Ç–∞
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∫–∞–∑–∞–Ω–∏–µ —Ç–∏–ø–∞ –¥–∞–π–¥–∂–µ—Å—Ç–∞
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤–≤–æ–¥–∞ —Å –¥–∞—Ç–∞–º–∏
# –û–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç - —Ç–æ–ª—å–∫–æ –¥–∞—Ç–∞
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–µ—Ç –±—ã—Ç—å —ç—Ç–æ –ø–µ—Ä–∏–æ–¥ –≤ –æ–¥–Ω–æ–º –∞—Ä–≥—É–º–µ–Ω—Ç–µ —á–µ—Ä–µ–∑ –¥–µ—Ñ–∏—Å
# –§–æ—Ä–º–∞—Ç: 2025-04-01-2025-04-10
# –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –¥–∞—Ç–∞
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ "—Å–µ–≥–æ–¥–Ω—è" –ª–∏ —ç—Ç–æ
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç —ç—Ç–æ —Ç–∏–ø –¥–∞–π–¥–∂–µ—Å—Ç–∞
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ "—Å–µ–≥–æ–¥–Ω—è" –ª–∏ —ç—Ç–æ
# –î–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ - –Ω–∞—á–∞–ª—å–Ω–∞—è –∏ –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç—ã
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ –ø–µ—Ä–∏–æ–¥ —Ç–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å
# –¢—Ä–∏ –∏ –±–æ–ª–µ–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ - –¥–∞—Ç—ã –∏ —Ç–∏–ø –¥–∞–π–¥–∂–µ—Å—Ç–∞
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ –ø–µ—Ä–∏–æ–¥ —Ç–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å
# –ü–æ–ª—É—á–∞–µ–º —Ç–∏–ø –¥–∞–π–¥–∂–µ—Å—Ç–∞
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤—ã—à–µ, –Ω–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –æ—Å—Ç–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
# ...

[FUNCTIONS]
def get_digest_type_name(digest_type):

–§–∞–π–ª: helpers.py
–¢–∏–ø: text_py

[FULL_CODE]
# –í —Ñ–∞–π–ª–µ utils/helpers.py
from datetime import datetime, timedelta
def normalize_date(date_obj):
    """
    –ü—Ä–∏–≤–æ–¥–∏—Ç –¥–∞—Ç—É –∫ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É –≤–∏–¥—É (–±–µ–∑ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞)
    
    Args:
        date_obj (datetime|date): –û–±—ä–µ–∫—Ç –¥–∞—Ç—ã –∏–ª–∏ datetime –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
        
    Returns:
        datetime: –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç datetime –±–µ–∑ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
    """
    if isinstance(date_obj, datetime):
        # –ï—Å–ª–∏ —ç—Ç–æ datetime —Å —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–æ–º, —É–±–∏—Ä–∞–µ–º –µ–≥–æ
        if date_obj.tzinfo is not None:
            return date_obj.replace(tzinfo=None)
        return date_obj
    elif hasattr(date_obj, 'year') and hasattr(date_obj, 'month') and hasattr(date_obj, 'day'):
        # –ï—Å–ª–∏ —ç—Ç–æ date, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ datetime
        return datetime(date_obj.year, date_obj.month, date_obj.day)
    else:
        raise ValueError(f"–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ {type(date_obj)}")

def date_to_start_of_day(date_obj):
    """
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞—Ç—É –≤ –Ω–∞—á–∞–ª–æ –¥–Ω—è (00:00:00)
    
    Args:
        date_obj (da...

[COMMENTS]
# –í —Ñ–∞–π–ª–µ utils/helpers.py
# –ï—Å–ª–∏ —ç—Ç–æ datetime —Å —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–æ–º, —É–±–∏—Ä–∞–µ–º –µ–≥–æ
# –ï—Å–ª–∏ —ç—Ç–æ date, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ datetime

[FUNCTIONS]
def normalize_date(date_obj):

def date_to_start_of_day(date_obj):

def date_to_end_of_day(date_obj):

def parse_date_string(date_str, format="%d.%m.%Y"):

–§–∞–π–ª: learning_manager.py
–¢–∏–ø: text_py

[FULL_CODE]
# utils/learning_manager.py
"""
–ú–µ–Ω–µ–¥–∂–µ—Ä –æ–±—É—á–∞—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
"""
import os
import json
import logging
from datetime import datetime
from typing import List, Dict, Any, Optional
import threading

logger = logging.getLogger(__name__)

class LearningExamplesManager:
    """–ú–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–±—É—á–∞—é—â–∏–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π"""
    
    def __init__(self, examples_dir="learning_examples", max_examples_per_category=200):
        self.examples_dir = examples_dir
        self.max_examples_per_category = max_examples_per_category
        self.examples_file = os.path.join(examples_dir, "examples.jsonl")
        self.examples_by_category = {}  # –ö—ç—à –ø—Ä–∏–º–µ—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
        self.last_loaded = None  # –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–≥—Ä—É–∑–∫–∏
        self.lock = threading.Lock()  # –î–ª—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–º–µ—Ä–æ–≤
        os.makedirs(examples_dir, exist_ok=True)
        self._load_examples()
   ...

[COMMENTS]
# utils/learning_manager.py
"""–ú–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–±—É—á–∞—é—â–∏–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π"""
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–º–µ—Ä–æ–≤
"""–ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —Ñ–∞–π–ª–∞ –≤ –∫—ç—à –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"""
# –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
# –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ
# –°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç–æ–π –∫—ç—à –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
# –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–º–µ—Ä
# –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫—ç—à
# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
# –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ —Ñ–∞–π–ª —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
# –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∏–º–µ—Ä –≤ —Ñ–∞–π–ª
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –∫—ç—à (—É–≤–µ–ª–∏—á–µ–Ω–æ –¥–æ 30 –º–∏–Ω—É—Ç)
# –ë–ª–æ–∫–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞
# –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –∫—ç—à–µ - —ç—Ç–æ—Ç –±–ª–æ–∫ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
# –ë—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
# –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞)
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–∑ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
# –°—Ä–∞–∑—É —Å–æ–±–∏—Ä–∞–µ–º –±–∞–∑–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä...

[FUNCTIONS]
    
    def __init__(self, examples_dir="learning_examples", max_examples_per_category=200):
    
    def get_examples(self, category=None, limit=5):

[CLASSES]

class LearningExamplesManager:

–§–∞–π–ª: text_utils.py
–¢–∏–ø: text_py

[FULL_CODE]
# utils/text_utils.py
"""
–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞
"""
import re
import logging

logger = logging.getLogger(__name__)

class TextUtils:
    @staticmethod
    def clean_markdown_text(text):
        """–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Markdown —Ç–µ–∫—Å—Ç–∞"""
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Å—ã–ª–æ–∫ –∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        text = re.sub(r'\[([^\]]+)\]\(([^)]+)\)', 
                     lambda m: f'[{m.group(1)}]({m.group(2)})', text)
        
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∂–∏—Ä–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
        text = re.sub(r'\*\*([^*]+)\*\*', r'<b>\1</b>', text)
        
        return text
    
    @staticmethod
    def convert_to_html(text):
        """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç Markdown-–ø–æ–¥–æ–±–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤ HTML"""
        text = re.sub(r'\*\*(.*?)\*\*', r'<b>\1</b>', text)  # **–∂–∏—Ä–Ω—ã–π** -> <b>–∂–∏—Ä–Ω—ã–π</b>
        text = re.sub(r'\*(.*?)\*', r'<i>\1</i>', text)      # *–∫—É—Ä—Å–∏–≤* -> <i>–∫—É—Ä—Å–∏–≤</i>
        
        # –£–¥–∞–ª—è–µ–º —ç–∫—Ä–∞–Ω–∏—Ä—É—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã
        text = re.sub(r'\\([.()[\]{}])', r'\1', text)
        
        return text
    
    @staticmethod
    def...

[COMMENTS]
# utils/text_utils.py
"""–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Markdown —Ç–µ–∫—Å—Ç–∞"""
# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Å—ã–ª–æ–∫ –∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∂–∏—Ä–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
"""–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç Markdown-–ø–æ–¥–æ–±–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤ HTML"""
# –£–¥–∞–ª—è–µ–º —ç–∫—Ä–∞–Ω–∏—Ä—É—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã
"""–†–∞–∑–±–∏–≤–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —á–∞—Å—Ç–∏ –¥–ª—è Telegram"""

[FUNCTIONS]
    def clean_markdown_text(text):
    def convert_to_html(text):
    def split_text(text, max_length=4000):

[CLASSES]

class TextUtils:

–§–∞–π–ª: test_agent.txt
–¢–∏–ø: text_txt

[CONTENT]
–ê–≥–µ–Ω—Ç: TestAgent

–û–ø–∏—Å–∞–Ω–∏–µ:
–¢–µ—Å—Ç–æ–≤—ã–π –ò–ò-–∞–≥–µ–Ω—Ç –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

–§—É–Ω–∫—Ü–∏–∏:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π


–§–∞–π–ª: README.md
–¢–∏–ø: text_md

[üöÄ_–ù–û–í–ê–Ø_–í–ï–†–°–ò–Ø_–°_INTELLIGENT_–ü–õ–ê–ù–ò–†–û–í–ê–ù–ò–ï–ú!]

–°–∏—Å—Ç–µ–º–∞ –±—ã–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –º–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º **Intelligent Orchestrator** - —É–º–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CrewAI –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –æ —Ç–æ–º, –∫–∞–∫–∏–µ –∞–≥–µ–Ω—Ç—ã –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ.


[INTELLIGENT_ORCHESTRATOR_AGENT]
- **–£–º–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â—É—é —Å–∏—Ç—É–∞—Ü–∏—é –∏ —Å–∞–º –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã–µ —Ä–µ—à–µ–Ω–∏—è**: –£—á–∏—Ç—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, –Ω–∞–ª–∏—á–∏–µ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
- **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π**: –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –∏–º–µ–µ—Ç –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ, –ø–æ—á–µ–º—É –æ–Ω–∞ –Ω—É–∂–Ω–∞
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏**: –†–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- **Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã**: –ï—Å–ª–∏ CrewAI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞


[–†–ï–®–ï–ù–ò–ï_–ü–†–û–ë–õ–ï–ú–´_–°_–ù–£–õ–ï–í–û–ô_–£–í–ï–†–ï–ù–ù–û–°–¢–¨–Æ]
–ù–æ–≤—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä **–≤—Å–µ–≥–¥–∞** –∑–∞–ø—É—Å–∫–∞–µ—Ç –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∏ –∫—Ä–∏—Ç–∏–∫ –∫–æ–≥–¥–∞ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —Ä–µ—à–∞—è –ø—Ä–æ–±–ª–µ–º—É —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ —Å –Ω—É–ª–µ–≤–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é (confidence=0).


[DAILY_WORKFLOW_(–ï–ñ–ï–î–ù–ï–í–ù–´–ô)]
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- –°–æ–±–∏—Ä–∞–µ—Ç –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- **–í—Å–µ–≥–¥–∞** –∑–∞–ø—É—Å–∫–∞–µ—Ç –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–í—Å–µ–≥–¥–∞** –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫—Ä–∏—Ç–∏–∫ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
- –°–æ–∑–¥–∞–µ—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–π–¥–∂–µ—Å—Ç—ã


[URGENT_UPDATE_(–°–†–û–ß–ù–û–ï_–û–ë–ù–û–í–õ–ï–ù–ò–ï)]
- –ë—ã—Å—Ç—Ä—ã–π —Å–±–æ—Ä —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–≥–æ –¥–∞–π–¥–∂–µ—Å—Ç–∞


[FULL_ANALYSIS_(–ü–û–õ–ù–´–ô_–ê–ù–ê–õ–ò–ó)]
- –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∑–∞ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥
- –ê–∫—Ü–µ–Ω—Ç –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–∞
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏–∫–æ–º


[DIGEST_ONLY_(–¢–û–õ–¨–ö–û_–î–ê–ô–î–ñ–ï–°–¢)]
- –†–∞–±–æ—Ç–∞ —Ç–æ–ª—å–∫–æ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –±–µ–∑ —Å–±–æ—Ä–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö


[–ë–´–°–¢–†–´–ô_–°–¢–ê–†–¢_–°_INTELLIGENT_ORCHESTRATOR]

```bash

[–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô_–°–ü–û–°–û–ë_-_–°_INTELLIGENT_–ü–õ–ê–ù–ò–†–û–í–ê–ù–ò–ï–ú]
python main.py --mode workflow --orchestrator --scenario daily_workflow


[–°–†–û–ß–ù–û–ï_–û–ë–ù–û–í–õ–ï–ù–ò–ï]
python main.py --mode workflow --orchestrator --scenario urgent_update


[–ü–û–õ–ù–´–ô_–ê–ù–ê–õ–ò–ó_–ó–ê_–ù–ï–î–ï–õ–Æ]
python main.py --mode workflow --orchestrator --scenario full_analysis --days 7


[–¢–û–õ–¨–ö–û_–°–û–ó–î–ê–ù–ò–ï_–î–ê–ô–î–ñ–ï–°–¢–ê]
python main.py --mode workflow --orchestrator --scenario digest_only
```


[–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï_–°–ò–°–¢–ï–ú–´]

```bash

[–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï_INTELLIGENT_–û–†–ö–ï–°–¢–†–ê–¢–û–†–ê]
python test_intelligent_orchestrator.py


[–ü–†–ò–ú–ï–†–´_–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø]
python orchestrator_examples.py
```


[LEGACY_–†–ï–ñ–ò–ú_(–î–õ–Ø_–°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–ò)]

```bash

[–°–¢–ê–†–´–ô_–°–ü–û–°–û–ë_–ë–ï–ó_–û–†–ö–ï–°–¢–†–ê–¢–û–†–ê]
python main.py --mode workflow --days 1


[LEGACY_–†–ï–ñ–ò–ú]
python main.py --mode legacy --days 1
```


[–ê–ù–ê–õ–ò–ó_–ö–û–ù–¢–ï–ö–°–¢–ê]
–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ –Ω–µ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –°–æ–æ–±—â–µ–Ω–∏—è—Ö —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ù–∞–ª–∏—á–∏–∏ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- –í—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º


[CREWAI_–ü–õ–ê–ù–ò–†–û–í–ê–ù–ò–ï]
Intelligent –∞–≥–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è:
```python

[–ü–†–ò–ú–ï–†_REASONING_–û–¢_–û–†–ö–ï–°–¢–†–ê–¢–û–†–ê]
"–ù–µ–æ–±—Ö–æ–¥–∏–º –∞–Ω–∞–ª–∏–∑ 15 –Ω–µ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö"
"–ó–∞–ø—É—Å–∫–∞—é –∫—Ä–∏—Ç–∏–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ 8 —Å–æ–æ–±—â–µ–Ω–∏–π —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é"
"–°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π –¥–∞–π–¥–∂–µ—Å—Ç, —Ç–∞–∫ –∫–∞–∫ –∑–∞ —Å–µ–≥–æ–¥–Ω—è –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –µ—â–µ –Ω–µ—Ç"
```


[–ê–î–ê–ü–¢–ò–í–ù–û–ï_–í–´–ü–û–õ–ù–ï–ù–ò–ï]
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Å fallback –ª–æ–≥–∏–∫–æ–π
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏


[–î–ï–¢–ê–õ–¨–ù–û–ï_–õ–û–ì–ò–†–û–í–ê–ù–ò–ï]
```
=== –†–ï–ó–£–õ–¨–¢–ê–¢–´ –í–´–ü–û–õ–ù–ï–ù–ò–Ø ===
–°—Ç–∞—Ç—É—Å: success
–°—Ü–µ–Ω–∞—Ä–∏–π: daily_workflow
–£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 100.0%
–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 29.4—Å
Intelligent –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: True

=== –ö–û–ù–¢–ï–ö–°–¢ –ü–õ–ê–ù–ò–†–û–í–ê–ù–ò–Ø ===
–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö: 15
–° –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é: 8
–î–∞–π–¥–∂–µ—Å—Ç–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è: 0

=== –î–ï–¢–ê–õ–ò –í–´–ü–û–õ–ù–ï–ù–ò–Ø –ó–ê–î–ê–ß ===
‚úÖ data_collection: completed (9.56—Å)
‚úÖ message_analysis: completed (8.42—Å)
‚úÖ categorization_review: completed (6.21—Å)
‚úÖ digest_creation: completed (5.15—Å)
```


[–ü–†–û–í–ï–†–ö–ê_–ó–î–û–†–û–í–¨–Ø_–°–ò–°–¢–ï–ú–´]
```bash

[–í_–ö–û–î–ï_–ú–û–ñ–ù–û_–ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨]
health_check = await registry.health_check()
print(f"–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã: {health_check['overall_status']}")
```


[–ß–¢–û_–ò–ó–ú–ï–ù–ò–õ–û–°–¨]
1. **agents/orchestrator.py** ‚Üí **IntelligentOrchestratorAgent**
2. **–ù–æ–≤—ã–π** agents/agent_registry.py —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π** main.py —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞** –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ legacy —Ä–µ–∂–∏–º


[–û–ë–ù–û–í–õ–ï–ù–ò–ï_–ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò]
```bash

[–£–ë–ï–î–ò–¢–ï–°–¨,_–ß–¢–û_–£_–í–ê–°_–ï–°–¢–¨_–í–°–ï_–ó–ê–í–ò–°–ò–ú–û–°–¢–ò]
poetry install


[–ò–õ–ò_–ï–°–õ–ò_–ò–°–ü–û–õ–¨–ó–£–ï–¢–ï_PIP]
pip install crewai


[–ó–ê–ü–£–°–¢–ò–¢–ï_–¢–ï–°–¢–´]
python test_intelligent_orchestrator.py
```


[ROBUST_–ü–õ–ê–ù–ò–†–û–í–ê–ù–ò–ï]
- –ï—Å–ª–∏ CrewAI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí fallback –Ω–∞ –±–∞–∑–æ–≤—É—é –ª–æ–≥–∏–∫—É
- –ï—Å–ª–∏ –∞–≥–µ–Ω—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –ø—Ä–æ–ø—É—Å–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ failed ‚Üí –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏


[–ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï_–í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï]
```python

[–ü–†–ï–î–û–°–¢–ê–í–õ–Ø–ï–¢_–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò_–î–õ–Ø_–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø]
```


[–î–õ–Ø_–ü–†–û–î–ê–ö–®–ï–ù–ê]
```bash

[–ï–ñ–ï–î–ù–ï–í–ù–´–ô_–ó–ê–ü–£–°–ö_–ß–ï–†–ï–ó_CRON]
0 9 * * * cd /path/to/bot && python main.py --mode workflow --orchestrator --scenario daily_workflow


[–°–†–û–ß–ù–´–ï_–û–ë–ù–û–í–õ–ï–ù–ò–Ø]
python main.py --mode workflow --orchestrator --scenario urgent_update
```


[–î–õ–Ø_–†–ê–ó–†–ê–ë–û–¢–ö–ò]
```bash

[–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï_–ò–ó–ú–ï–ù–ï–ù–ò–ô]
python main.py --mode workflow --orchestrator --scenario daily_workflow --debug


[–ê–ù–ê–õ–ò–ó_–ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò]
python orchestrator_examples.py
```


[–î–õ–Ø_–ú–û–ù–ò–¢–û–†–ò–ù–ì–ê]
```bash

[–ü–†–û–í–ï–†–ö–ê_–°–ò–°–¢–ï–ú–´]
python test_intelligent_orchestrator.py


[–î–ï–¢–ê–õ–¨–ù–ê–Ø_–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê]
python main.py --mode workflow --orchestrator --scenario daily_workflow --debug
```


[–ï–°–õ–ò_–°–û–û–ë–©–ï–ù–ò–Ø_–û–°–¢–ê–Æ–¢–°–Ø_–°_CONFIDENCE=0]
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è: `message_analysis` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –ø–ª–∞–Ω–µ
2. –í–∫–ª—é—á–∏—Ç–µ debug —Ä–µ–∂–∏–º: `--debug`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏


[–ï–°–õ–ò_–ö–†–ò–¢–ò–ö_–ù–ï_–ó–ê–ü–£–°–ö–ê–ï–¢–°–Ø]
1. Intelligent –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `categorization_review` –µ—Å—Ç—å –≤ –ø–ª–∞–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CriticAgent –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ


[–ï–°–õ–ò_CREWAI_–ù–ï_–†–ê–ë–û–¢–ê–ï–¢]
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ fallback —Ä–µ–∂–∏–º —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –≤ –ª–æ–≥–∞—Ö:
```
–û—à–∏–±–∫–∞ –ø—Ä–∏ intelligent –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏: ... 
–ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ fallback –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ...
```


[üéâ_–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê_–ù–û–í–û–ô_–í–ï–†–°–ò–ò]

‚úÖ **–£–º–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å  
‚úÖ **–†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å confidence=0** - –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∏ –∫—Ä–∏—Ç–∏–∫ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ  
‚úÖ **–õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è  
‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫  
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - legacy —Ä–µ–∂–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω  


[üìû_–ü–û–î–î–ï–†–ñ–ö–ê]

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python test_intelligent_orchestrator.py`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å `--debug` —Ñ–ª–∞–≥–æ–º
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ fallback: `python main.py --mode legacy`
4. –ò–∑—É—á–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ `orchestrator_examples.py`

–§–∞–π–ª: agent_config.json
–¢–∏–ø: text_json

[CONFIG]
{
  "agent_name": "TestAgent",
  "model": "gpt-4",
  "temperature": 0.1,
  "system_prompt": "–¢—ã - –±–∞–Ω–∫–æ–≤—Å–∫–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç",
  "guardrails": [
    "–ù–µ —Ä–∞–∑–≥–ª–∞—à–∞–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é",
    "–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞"
  ]
}

[PARSED_JSON]
{
  "agent_name": "TestAgent",
  "model": "gpt-4",
  "temperature": 0.1,
  "system_prompt": "–¢—ã - –±–∞–Ω–∫–æ–≤—Å–∫–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç",
  "guardrails": [
    "–ù–µ —Ä–∞–∑–≥–ª–∞—à–∞–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é",
    "–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞"
  ]
}


=== –ê–ù–ê–õ–ò–ó –ü–†–û–ú–ü–¢–û–í ===
–í—Å–µ–≥–æ –ø—Ä–æ–º–ø—Ç–æ–≤: 9

–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã:
  1. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é Gemma 3 —á–µ—Ä–µ–∑ LLM Studio...
  2. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é Qwen2.5 —á–µ—Ä–µ–∑ LLM Studio...
  3. –ü—Ä–∏–≤–æ–¥–∏—Ç –¥–∞—Ç—É –∫ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É –≤–∏–¥—É (–±–µ–∑ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞)
    
    Args:
        date_obj (datetime|date): –û–±—ä–µ–∫—Ç –¥–∞—Ç—ã –∏–ª–∏ datetime –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
        
    Returns:
        datetime: –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤...

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
  1. - –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π...
  2. s": [
    "–ù–µ —Ä–∞–∑–≥–ª–∞—à–∞–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é",
    "–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞"
  ]
}...

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: code_generation